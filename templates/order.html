<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Order Stock / Dealers (Farmer ERP)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{--bg:#0b1727;--panel:#101c2c;--panel2:#0e1a29;--text:#e9eef6;--muted:#9fb3c8;--brand:#22c55e;--accent:#3b82f6;--danger:#ef4444;--warn:#f59e0b;--radius:14px;--shadow:0 10px 28px rgba(0,0,0,.35)}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0a1625,#0b1522);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:1200px;margin:20px auto;padding:0 16px 80px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .title{font-weight:800;font-size:22px;letter-spacing:.3px}
    .btn{border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));padding:10px 14px;border-radius:10px;color:var(--text);cursor:pointer}
    .btn:hover{transform:translateY(-1px)}
    .btn-primary{background:linear-gradient(180deg,#2563eb,#1d4ed8);border:none;color:#fff}
    .btn-success{background:linear-gradient(180deg,#22c55e,#16a34a);border:none;color:#08130c;font-weight:700}
    .btn-danger{background:linear-gradient(180deg,#ef4444,#dc2626);border:none;color:#fff}
    .grid{display:grid;gap:16px;margin-top:16px}
    @media(min-width:1000px){.grid{grid-template-columns:1fr}}
    .card{background:var(--panel);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px}
    .card h3{margin:6px 0 12px 0}
    .row{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
    .row-compact{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .row .full{grid-column:1/-1}
    input,select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:#0d1a2a;color:var(--text)}
    table{width:100%;border-collapse:separate;border-spacing:0 8px}
    th,td{text-align:left;padding:10px}
    thead th{color:var(--muted);font-size:12px;text-transform:uppercase;letter-spacing:.4px}
    tbody tr{background:var(--panel2);border:1px solid rgba(255,255,255,.06)}
    tbody tr td:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
    tbody tr td:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.06)}
    .chip.ok{color:#22c55e;border-color:rgba(34,197,94,.35);background:rgba(34,197,94,.12)}
    .chip.warn{color:#f59e0b;border-color:rgba(245,158,11,.35);background:rgba(245,158,11,.12)}
    .chip.danger{color:#ef4444;border-color:rgba(239,68,68,.35);background:rgba(239,68,68,.12)}
    .muted{color:var(--muted)}
    .right{display:flex;gap:8px;align-items:center;justify-content:flex-end}
    .sum{display:flex;gap:12px;flex-wrap:wrap}
    .sum .box{background:var(--panel2);border:1px solid rgba(255,255,255,.06);padding:10px 12px;border-radius:12px}
    a{color:#93c5fd;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="title">ðŸ§¾ Order Stock / Dealers</div>
      <div class="right">
        <a class="btn" href="/erp">ðŸ“Š Back to Dashboard</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Add Dealer / Supplier</h3>
        <form method="post" action="{{ url_for('add_dealer') }}">
          <div class="row-compact">
            <input name="name" placeholder="Dealer Name" required />
            <input name="phone" placeholder="Phone" />
            <input name="website" placeholder="Website URL" />
          </div>
          <div class="right" style="margin-top:8px">
            <button class="btn-success" type="submit">âž• Add Dealer</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h3>Dealers / Suppliers List</h3>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Phone</th>
              <th>Website</th>
              <th class="right">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for d in dealers %}
            <tr>
              <td>{{ d.name }}</td>
              <td>{{ d.phone }}</td>
              <td><a href="{{ d.website }}" target="_blank">{{ d.website }}</a></td>
              <td>
                <!-- Edit Dealer Form -->
                <form method="post" action="{{ url_for('edit_dealer', id=d.id) }}" style="display:inline-flex;gap:6px">
                  <input name="name" value="{{ d.name }}" placeholder="Name" required style="width:120px"/>
                  <input name="phone" value="{{ d.phone }}" placeholder="Phone" style="width:120px"/>
                  <input name="website" value="{{ d.website }}" placeholder="Website" style="width:160px"/>
                  <button class="btn-primary" type="submit">Save</button>
                </form>

                <!-- Delete Dealer Form -->
                <form method="post" action="{{ url_for('delete_dealer', dealer_id=d.id) }}" style="display:inline;">
                  <button class="btn-danger" type="submit" onclick="return confirm('Are you sure you want to delete this dealer?')">Delete</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>